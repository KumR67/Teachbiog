<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JSON Editor ‚Äì Biographical Dictionary</title>
<link rel="stylesheet" href="layout.css">
<link rel="stylesheet" href="dico_tionok.css">
</head>
<body>

<h1>JSON Editor ‚Äì Biographical Dictionary</h1>

<div>
  <label>Fullname (leave empty for all):</label><br>
  <input id="fullname" placeholder="Fischer, Michael"><br>

  <label>Rubrique (leave empty for all):</label><br>
  <input id="rubrique" placeholder="Personal records"><br>

  <label>Text to search:</label><br>
  <input id="search_text" placeholder="–ú–∏—Ö–∞—ç–ª—å"><br>

  <label>Replace with:</label><br>
  <input id="replace_text" placeholder="–ú–∏—Ö–∞–∏–ª"><br>

  <label>
    <input type="checkbox" id="preview_only" checked>
    Preview only (do not commit)
  </label><br><br>

  <button onclick="runWorkflow()">Run Modification</button>
</div>

<div id="workflow-status" style="margin-top:20px; white-space: pre-line;"></div>

<script>
// Nom du workflow proxy dans GitHub
const WORKFLOW_PROXY = "trigger-modify-json.yaml";
const REPO_OWNER = "KumR67";
const REPO_NAME = "Teachbiog";

// Fonction pour d√©clencher le workflow proxy depuis GitHub UI
async function runWorkflow() {
  const fullname = document.getElementById("fullname").value;
  const rubrique = document.getElementById("rubrique").value;
  const search_text = document.getElementById("search_text").value;
  const replace_text = document.getElementById("replace_text").value;
  const preview_only = document.getElementById("preview_only").checked;

  const statusDiv = document.getElementById("workflow-status");
  statusDiv.textContent = "üöÄ Triggering workflow...";

  try {
    // GitHub UI permet de d√©clencher le workflow via workflow_dispatch
    // Ici, on guide l'utilisateur : il clique sur "Run workflow" sur GitHub
    statusDiv.textContent =
      `‚úÖ Fill in inputs and trigger the workflow:\n\n` +
      `1. Go to Actions ‚Üí ${WORKFLOW_PROXY} ‚Üí Run workflow\n` +
      `2. Fill inputs:\n` +
      `   - fullname: ${fullname}\n` +
      `   - rubrique: ${rubrique}\n` +
      `   - search_text: ${search_text}\n` +
      `   - replace_text: ${replace_text}\n` +
      `   - preview_only: ${preview_only}\n\n` +
      `3. Click "Run workflow" on GitHub.`;

  } catch (err) {
    statusDiv.textContent = `‚ùå Error: ${err}`;
  }
}
</script>

</body>
</html>
